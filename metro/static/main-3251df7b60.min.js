var httpBase="http://scandev.xs1h.com/";angular.module("xs1h",["ionic","template"]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(n,t,e){t.when("","/shop"),n.state("shop",{url:"/shop/:storeId/:orderNumber",views:{mainContent:{templateUrl:"template/shop.html",controller:"shopCtrl"}}}).state("orderpay",{url:"/orderpay?orderNumber&storeId",views:{mainContent:{templateUrl:"template/order-pay.html",controller:"orderPayCtrl"}}}).state("order",{url:"/order",templateUrl:"template/order.html",controller:"orderCtrl"}),e.interceptors.push("timestampMarker")}]),angular.module("xs1h").run(["$rootScope","$http",function(n,t){var e=location.href.split("#")[0];t.post("index/getConfig",{texr:1}).success(function(t){0==t.statusCode&&(n.global=t.data,console.log(n.global))}),t.post("/index/getWeChatJsSign?url="+e,{url:e}).success(function(t,e,i,a){0==t.statusCode&&(wx.config(angular.fromJson(t.data)),wx.ready(function(){wx.hideOptionMenu(),n.wxReady=!0}))})}]),function(n){try{n=angular.module("template")}catch(t){n=angular.module("template",[])}n.run(["$templateCache",function(n){n.put("template/order-pay.html",'<ion-view class="pay">\n    <ion-header-bar align-title="center" class="bar-energized">\n<!--         <a class="btn-back" ng-click="go(-1)"></a>\n -->        <h1 class="title">订单支付</h1>\n    </ion-header-bar>\n    <ion-content overflow-scroll="false">\n        <div >\n            <div class="item item-divider">\n                预定餐品\n                <span class="pull-right">共{{order.commodityNumber}}件</span>\n            </div>\n            <ul class="list">\n                <li class="xs-item1" ng-repeat="item in order.commodityList">\n                    <img ng-src="{{global.adminUrl+item.commodityImg}}"/>\n                    <div class="desc">\n                        <p ng-bind="item.commodityName"></p>\n                        <div class="bottom">\n                            <span class="txt-price" ng-bind="item.promotion|currency :\'￥\'"></span>\n                            <div class="number">\n                                <span class="count" ng-bind="\'× \'+item.totalNum"></span>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n          \n            \n            <div class="item item-divider title">\n                餐品费用\n                <span class="pull-right" ng-bind="order.total|currency :\'￥\'"></span>\n            </div>\n           \n            \n            <div></div>\n            <div class="item item-divider title">\n                支付方式\n            </div>\n            <div class="payType">\n                <i class="payIcon"></i>\n                <span class="supportType">微信支付</span>\n                <span class="tip">暂时只支持微信支付</span>\n            </div>\n        </div>\n     \n    </ion-content>\n    <div ng-if="paying" class="payLoadingBG">\n        <div class="outside">\n            <div class="confirm-content fade in">\n                <div>\n                    <span>支付中...</span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="bar bar-footer bar-dark" >\n        <div class="row-basket">\n            <button class="pull-right" ng-click="submitOrder()" ng-disabled="paying">\n                <a class="btn-o-tobuy font16">确认支付</a>\n            </button>\n            <div class="media media-basket">\n                <div class="media-left">\n                    <div class="type2">\n                        <span>实付款:</span>\n                    </div>\n                </div>\n                <div class="media-body">\n                    <div class="media-heading" ng-bind="\'￥\'+ order.total"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n  \n</ion-view>\n')}])}(),function(n){try{n=angular.module("template")}catch(t){n=angular.module("template",[])}n.run(["$templateCache",function(n){n.put("template/order.html","")}])}(),function(n){try{n=angular.module("template")}catch(t){n=angular.module("template",[])}n.run(["$templateCache",function(n){n.put("template/shop.html",'<ion-view class="itemList">\n    <ion-header-bar align-title="center" class="bar-energized">\n        <div class="title">\n            <span class="container icon">\n                <span ng-bind="$parent.currStore.name" class="storeName ng-binding"></span>\n            </span>\n        </div>\n    </ion-header-bar>\n    <ion-content delegate-handle="mainScroll" scroll-event-interval="800" on-scroll="swipe()" overflow-scroll="false">\n        <div class="mainContent">\n            <div class="list-content">\n                <ul class="list">\n                    <li class="xs-item1" ng-class="{\'item-divider\':item.name}" ng-repeat="item in totalItemList track by $index" ng-style="{true:{\'height\':\'{{item.height+\'px\'}}\'}}[item.empty]">\n                        <span ng-if="item.name">{{::item.name}}</span>\n                        <!--<img ng-if="!item.name && !item.empty" ng-src="{{::(imgRoot + item.scan)}}" ui-sref="commodity-detail({commodityId:item.commodityId})" />-->\n                        <img ng-if="!item.name && !item.empty" ng-src="{{::(imgRoot + item.scan)}}" />\n                        <div class="desc" ng-if="!item.name && !item.empty">\n                            <p class="title">{{::item.commodityName}}</p>\n                            <div>\n                                <i class="icon-am" ng-if="item.mealId == 2 || item.mealId == 1"></i>\n                                <i class="icon-mm" ng-if="item.mealId == 3 || item.mealId == 1"></i>\n                                <i class="icon-pm" ng-if="item.mealId == 4 || item.mealId == 1"></i>\n                            </div>\n                            <div class="bottom">\n                                <span class="txt-price">￥{{::item.promotion}}</span>\n                                <div class="number">\n                                <span class="minusCount">\n                                    <div ng-show="item.count > 0" style="display: table">\n                                        <span class="minus" ng-click="removeItem(item)"></span>\n                                        <span class="count" ng-bind="item.count"></span>\n                                    </div>\n                                </span>\n                                    <span class="plus" ng-click="addItem(item)"></span>\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </ion-content>\n    <div class="bar bar-footer bar-dark">\n        <div class="row-basket">\n            <div class="pull-right" ng-click="go(\'shoppingCart\')" style="pointer-events: auto;">\n                <a class="btn-o-tobuy {{shoppingCartTotalPrice <= 0 ? \'btn-o-tobuy-none\' : \'font16\'}}" ng-bind="shoppingCartTotalPrice > 0 ? \'去结算\':\'选择任意餐品\'"></a>\n            </div>\n            <div class="media media-basket">\n                <div class="media-left">\n                    <img class="media-object" src="img/home/basket.png" ng-click="basketShow = basketShow ? !basketShow:true">\n                    <div class="xs-badge">\n                        <span class="badge" ng-bind="shoppingCartTotalNum"></span>\n                    </div>\n                </div>\n                <div class="media-body">\n                    <div class="media-heading" ng-bind="\'￥\' + (shoppingCartTotalPrice|number:2)"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</ion-view>')}])}(),angular.module("xs1h").factory("timestampMarker",[function(){var n={request:function(n){var t=arguments[0].headers;return"application/json"==(t.Accept&&t.Accept.split(",")[0])&&n.url.indexOf("template")<0&&(n.url=httpBase+n.url),n},response:function(n){return n}};return n}]),angular.module("xs1h").controller("orderCtrl",["$scope","$state","$http","$timeout","$ionicModal","$rootScope","$ionicLoading","$ionicPopup","$ionicScrollDelegate","$ionicBackdrop","$stateParams",function(n,t,e,i,a,s,o,l,r,c,d){}]),angular.module("xs1h").controller("orderPayCtrl",["$scope","$state","$http","$timeout","$ionicModal","$rootScope","$ionicLoading","$ionicPopup","$ionicScrollDelegate","$ionicBackdrop","$stateParams","$rootScope",function(n,t,e,i,a,s,o,l,r,c,d,s){e.post("order/findOrderByNumber",d).success(function(t){if(0==t.statusCode){n.order=t.data;for(var e=0,i=n.order.commodityList,a=0;a<i.length;a++)e+=i[a].totalNum;n.order.commodityNumber=e}}),n.quickPay=function(){s.wxReady?n.submitOrder():i(n.quickPay(),100)},n.quickPay(),n.submitOrder=function(){e.post("/order/payOrderOnly",d).success(function(n){})}}]),angular.module("xs1h").controller("shopCtrl",["$scope","$state","$http","$timeout","$ionicModal","$rootScope","$ionicLoading","$ionicPopup","$ionicScrollDelegate","$ionicBackdrop","$stateParams",function(n,t,e,i,a,s,o,l,r,c,d){e.post("order/findOrderByNumber",d).success(function(n){console.log(n)})}]);